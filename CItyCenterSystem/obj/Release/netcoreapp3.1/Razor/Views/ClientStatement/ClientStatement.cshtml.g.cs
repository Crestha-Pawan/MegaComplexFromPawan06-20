#pragma checksum "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "d1a92d41cd4e5a4a39751661126129293ab65884"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_ClientStatement_ClientStatement), @"mvc.1.0.view", @"/Views/ClientStatement/ClientStatement.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\_ViewImports.cshtml"
using CItyCenterSystem;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\_ViewImports.cshtml"
using CItyCenterSystem.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
using FiboInfraStructure;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"d1a92d41cd4e5a4a39751661126129293ab65884", @"/Views/ClientStatement/ClientStatement.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"bd336beda5a2acf43ac2fe33525f36885b8934e6", @"/Views/_ViewImports.cshtml")]
    public class Views_ClientStatement_ClientStatement : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<FiboBlock.Src.ViewModel.ClientViewModel>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
   Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "ClientStatement";
    int billNo = 0;
    decimal? pmTotalDr = 0;
    var blockList = await _blockRepo.GetAllBlockAsync();
    var roomList = await _roomRepo.GetAllRoomAsync();
    var clientBlock = await _clientBlockRepo.GetAllClientBlockRoomSetupAsync();
    decimal credit = 0;
    decimal? balance = 0;
    decimal? debit = 0;
    decimal? pmBalance = 0;
    var Block = string.Empty;
    var Room = string.Empty;

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<script type=""text/javascript"">
    function CallPrint(strid) {
        var mywindow = document.getElementById('profile');
        var popupWin = window.open('', ""Kaamana Format"", 'width=350,height=150,location=no,left=200px');

        popupWin.document.open();
        popupWin.document.write('<html><title>' + """" + '</title><link rel=""stylesheet"" type=""text/css""  href=""../Content/bootstrap.min.css"" /></head><body onload=""window.print()"">')
        popupWin.document.write('<html><title>' + """" + '</title><link rel=""stylesheet"" type=""text/css"" href=""../Content/print.css"" /></head><body onload=""window.print()"">')
        popupWin.document.write(mywindow.innerHTML);
        popupWin.document.write('</html>');

        popupWin.document.close();

    }

</script>
");
#nullable restore
#line 37 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
 using (Html.BeginForm("ClientStatement", "ClientStatement", FormMethod.Get, new { @class = "form-view-data" }))
{

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    <div class=""row"" style=""text-align:right"">
        <div class=""col-lg-12 col-md-12 col-sm-12 col-xs-12"">
            <button type=""button"" class=""btn""
                    style=""margin-bottom:20px;background-color:darkblue;padding-top: 3px;
    padding-bottom: 5px;padding-left:5px;color:white;font-weight:bold""
                    onclick=""CallPrint('strid')"" data-ma-action=""print"">
                <i class=""mdi mdi-cloud-print""></i> Print
            </button>
            <button type=""button"" class=""btn btn-sm btn-secondary"" style=""float: right""");
            BeginWriteAttribute("onclick", "\r\n                    onclick=\"", 2285, "\"", 2429, 5);
            WriteAttributeValue("", 2316, "window.location.href", 2316, 20, true);
            WriteAttributeValue(" ", 2336, "=", 2337, 2, true);
            WriteAttributeValue(" ", 2338, "\'", 2339, 2, true);
#nullable restore
#line 48 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
WriteAttributeValue("", 2340, Url.Action("LedgerExportToExcel", "ClientStatement", new { clientId = Model.ClientId }), 2340, 88, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 2428, "\'", 2428, 1, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                Export Excel\r\n            </button>\r\n        </div>\r\n    </div>\r\n");
#nullable restore
#line 53 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
}

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    <div class=""card"" id=""profile"">
        <div class=""card-header""><h4>Client Information</h4><hr /></div>
        <div class=""card-body"">
            <table width=""100%"">
                <tr>
                    <td>
                        <label>Business Name</label>
                        <label>");
#nullable restore
#line 61 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                          Write(Model.Clients.FirstOrDefault().BusinessName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>\r\n                    </td>\r\n                    <td>\r\n                        <label>Owner Name</label>\r\n                        <label>");
#nullable restore
#line 65 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                          Write(Model.Clients.FirstOrDefault().OwnerName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>\r\n                    </td>\r\n                    <td>\r\n                        <label>Contact</label>\r\n                        <label>");
#nullable restore
#line 69 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                          Write(Model.Clients.FirstOrDefault().ContactNumber);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label>RoomNo</label>\r\n                        <label>\r\n");
#nullable restore
#line 76 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                             foreach (var _detail in clientBlock.Where(x => x.ClientId == Model.Clients.FirstOrDefault().Id).ToList())
                            {
                                if (_detail.RoomId.Contains(","))
                                {
                                    string[] _tmpRoom = _detail.RoomId.Split(",");
                                    foreach (var id in _tmpRoom)
                                    {
                                        var room = roomList.Where(x => x.Id == long.Parse(id)).FirstOrDefault();
                                        Room += room.Name + ",";
                                    }
                                }
                                else
                                {
                                    var room = roomList.Where(x => x.BlockId == _detail.BlockId).FirstOrDefault();
                                    Room += room.Name + ",";
                                }
                            }

#line default
#line hidden
#nullable disable
            WriteLiteral("                            ");
#nullable restore
#line 93 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                       Write(Room);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <label>Block No</label>\r\n                        <label>\r\n");
#nullable restore
#line 100 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                             foreach (var _detail in clientBlock.Where(x => x.ClientId == Model.Clients.FirstOrDefault().Id).ToList())
                            {
                                var block = await _blockRepo.GetByIdAsync((long)_detail.BlockId);
                                Block += block.Name + ",";
                            }

#line default
#line hidden
#nullable disable
            WriteLiteral("                            ");
#nullable restore
#line 105 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                       Write(Block);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                        </label>\r\n                    </td>\r\n                    <td>\r\n                        <label>Opening Balance</label>\r\n                        <label>");
#nullable restore
#line 110 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                          Write(Model.Clients.FirstOrDefault().Collateral);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>\r\n                        <br />\r\n                        <label>Closing Balance</label>\r\n");
#nullable restore
#line 113 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                         foreach (var item in Model.Billings)
                        {
                            credit += item.CashReceived.ToDecimal()+item.DuePaid.ToDecimal();
                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 117 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                           var openingBal = Model.Clients.FirstOrDefault().Collateral; 

#line default
#line hidden
#nullable disable
#nullable restore
#line 118 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                         if (openingBal.ToDecimal() > credit)
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <label style=\"color:red\">");
#nullable restore
#line 120 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                                Write(credit);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>");
#nullable restore
#line 120 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                                                    }
                        else
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <label style=\"color:green\">");
#nullable restore
#line 123 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                                  Write(credit);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>");
#nullable restore
#line 123 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                                                      }

#line default
#line hidden
#nullable disable
            WriteLiteral("                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n\r\n");
            WriteLiteral(@"        </div>
        <hr />
        <div class=""card-header""><h4>Client Statement</h4><hr /></div>
        <div class=""table-responsive"">
            <div class=""tableFixHead"">
                <table class=""table table-bordered table-striped"" BORDER=""1"" width=""100%"">
                    <thead style=""background-color: #FFFFFFCC;"">
                        <tr>
                            <th>
                                Date
                            </th>
                            <th>
                                Particulars
                            </th>

                            <th>
                                Dr
                            </th>
                            <th>
                                Cr
                            </th>
                            <th>
                                Balance
                            </th>
                        </tr>
                    </thead>
                    <tbody>
");
#nullable restore
#line 208 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                         foreach (var item in Model.Billings)
                        {
                            decimal due = 0;
                            due = item.DuePaid.ToDecimal();
                            pmTotalDr = item.GrandTotal.ToDecimal() + item.Fine.ToDecimal() + item.ElectricityFineAmount.ToDecimal() - item.Discount.ToDecimal()-item.DuePaid.ToDecimal();
                            billNo++;
                            pmBalance += pmTotalDr;
                            balance = pmTotalDr-item.CashReceived.ToDecimal();
                            debit += balance;
                            DateTime? dt = item.CreatedDate;

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <tr>\r\n                            <td>\r\n                                ");
#nullable restore
#line 220 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                           Write(dt.ToNepDate());

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                            </td>\r\n                            <td>\r\n                                <label>Bill No. ");
#nullable restore
#line 223 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                           Write(item.BillNo);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>\r\n                            </td>\r\n                            <td>\r\n                                ");
#nullable restore
#line 226 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                           Write(pmTotalDr);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                            </td>\r\n                            <td>\r\n");
#nullable restore
#line 229 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                 if (due > pmTotalDr)
                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <span>");
#nullable restore
#line 231 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                     Write(due.ToString().Trim('-'));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n");
#nullable restore
#line 232 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                }
                                else
                                {
                                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 235 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                               Write(item.CashReceived);

#line default
#line hidden
#nullable disable
#nullable restore
#line 235 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                                      
                                }

#line default
#line hidden
#nullable disable
            WriteLiteral("                            </td>\r\n                            <td>\r\n");
#nullable restore
#line 239 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                 if (due > pmTotalDr)
                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <span>");
#nullable restore
#line 241 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                     Write(due.ToString().Trim('-'));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n");
#nullable restore
#line 242 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                }
                                else
                                {
                                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 245 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                               Write(balance);

#line default
#line hidden
#nullable disable
#nullable restore
#line 245 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                                            
                                }

#line default
#line hidden
#nullable disable
            WriteLiteral("                            </td>\r\n                        </tr>\r\n");
#nullable restore
#line 249 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                        }

#line default
#line hidden
#nullable disable
            WriteLiteral("                    </tbody>\r\n                    <tfoot>\r\n                        <tr>\r\n                            <td colspan=\"2\" style=\"text-align:right\">Total</td>\r\n\r\n                            <td>\r\n                                ");
#nullable restore
#line 256 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                           Write(pmBalance);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                            </td>\r\n                            <td>\r\n                                ");
#nullable restore
#line 259 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                           Write(credit);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                            </td>\r\n                            <td>\r\n                                ");
#nullable restore
#line 262 "E:\Mega-Complex_City_Center_V4\CItyCenterSystem\Views\ClientStatement\ClientStatement.cshtml"
                           Write(debit);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                            </td>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public FiboBlock.InfraStructure.Repository.IClientBlockRoomSetupRepository _clientBlockRepo { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public FiboBlock.InfraStructure.Repository.IRoomRepository _roomRepo { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public FiboBlock.InfraStructure.Repository.IBlockRepository _blockRepo { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<FiboBlock.Src.ViewModel.ClientViewModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
